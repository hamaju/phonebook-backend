(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(15),o=t.n(a),u=(t(20),t(6)),i=t(3),l=t(0),s=function(e){var n=e.label,t=e.value,r=e.onChange;return Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:n})," ",Object(l.jsx)("input",{value:t,onChange:r})]})},f=function(e){var n=e.label,t=e.filter,r=e.handleFilterChange;return Object(l.jsxs)("div",{children:[n," ",Object(l.jsx)("input",{type:"text",value:t,onChange:r})]})},j=function(e){var n=e.onSubmit;return Object(l.jsx)("form",{onSubmit:n,children:Object(l.jsx)("button",{type:"submit",children:"add"})})},b=function(e){var n=e.person,t=e.handlePersonDelete;return Object(l.jsxs)("li",{children:[n.name," ",n.number," ",Object(l.jsx)("button",{onClick:function(){return t(n.id)},children:"del"})]})},d=function(e){var n=e.persons,t=e.filter,r=e.handlePersonDelete;return Object(l.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(l.jsx)(b,{person:e,handlePersonDelete:r},e.name)}))})},h=function(e){var n=e.notification;return null===n?null:Object(l.jsx)("div",{className:n.type,children:n.message})},m=t(4),O=t.n(m),v="/api/persons",p={getAll:function(){return O.a.get(v).then((function(e){return e.data}))},create:function(e){return O.a.post(v,e).then((function(e){return e.data}))},update:function(e,n){return O.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return O.a.delete("".concat(v,"/").concat(e)).then((function(e){return e.data}))}},x=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),o=Object(i.a)(a,2),b=o[0],m=o[1],O=Object(r.useState)(""),v=Object(i.a)(O,2),x=v[0],g=v[1],w=Object(r.useState)(""),C=Object(i.a)(w,2),S=C[0],y=C[1],A=Object(r.useState)(null),D=Object(i.a)(A,2),P=D[0],k=D[1];Object(r.useEffect)((function(){p.getAll().then((function(e){c(e)}))}),[]);var E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"primary";k({message:e,type:n}),setTimeout((function(){k(null)}),5e3)};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Phonebook"}),Object(l.jsx)(h,{notification:P}),Object(l.jsx)(f,{label:"filter shown with",filter:S,handleFilterChange:function(e){y(e.target.value.toLowerCase())}}),Object(l.jsx)("h2",{children:"Add new"}),Object(l.jsx)(s,{label:"name",value:b,onChange:function(e){m(e.target.value)}}),Object(l.jsx)(s,{label:"number",value:x,onChange:function(e){g(e.target.value)}}),Object(l.jsx)(j,{onSubmit:function(e){e.preventDefault();var n={name:b,number:x};if(t.some((function(e){return e.name===b}))){var r=t.find((function(e){return e.name===b})),a=r.id,o=Object(u.a)(Object(u.a)({},r),{},{number:x});window.confirm("".concat(b," already exists, replace the old number with a new one?"))&&(p.update(a,o).then((function(){p.getAll().then((function(e){return c(e)}))})).catch((function(){E("Information of ".concat(r.name," has already been removed from the server"),"error"),c(t.filter((function(e){return e.id!==a})))})),m(""),g(""))}else p.create(n).then((function(e){c(t.concat(e)),E("Added ".concat(n.name)),m(""),g("")})).catch((function(e){E(e.response.data.error,"error")}))}}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(d,{persons:t,filter:S,handlePersonDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&(p.remove(e).then((function(){p.getAll().then((function(e){return c(e)}))})),E("Removed ".concat(n.name)),y(""))}})]})};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.6c6ead80.chunk.js.map